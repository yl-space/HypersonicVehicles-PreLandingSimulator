<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import Test</title>

    <!-- Import map for Three.js -->
    <script type="importmap">
    {
        "imports": {
            "three": "/node_modules/three/build/three.module.js",
            "three/": "/node_modules/three/"
        }
    }
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #0a300a;
            border: 1px solid #0f0;
        }
        .error {
            background: #300a0a;
            border: 1px solid #f00;
        }
    </style>
</head>
<body>
    <h1>Three.js Import Test</h1>
    <div id="results"></div>

    <script type="module">
        const results = document.getElementById('results');

        async function test(name, fn) {
            const div = document.createElement('div');
            div.className = 'test';
            try {
                const result = await fn();
                div.className += ' success';
                div.innerHTML = `‚úì ${name}: ${result}`;
            } catch (error) {
                div.className += ' error';
                div.innerHTML = `‚úó ${name}: ${error.message}`;
                console.error(error);
            }
            results.appendChild(div);
        }

        // Test 1: Bare import
        await test('Bare Three.js import', async () => {
            const THREE = await import('three');
            return `Loaded version ${THREE.REVISION}`;
        });

        // Test 2: Three.js examples
        await test('EffectComposer import', async () => {
            const { EffectComposer } = await import('three/examples/jsm/postprocessing/EffectComposer.js');
            return 'Loaded successfully';
        });

        // Test 3: SimulationManager
        await test('SimulationManager import', async () => {
            const { SimulationManager } = await import('/src/simulation/SimulationManager.js');
            return 'Loaded successfully';
        });

        // Test 4: SceneManager with examples
        await test('SceneManager import', async () => {
            const { SceneManager } = await import('/src/core/SceneManager.js');
            return 'Loaded successfully';
        });

        // Test 5: TrajectoryService
        await test('TrajectoryService import', async () => {
            const { TrajectoryService } = await import('/src/services/TrajectoryService.js');
            return 'Loaded successfully';
        });

        // Summary
        setTimeout(() => {
            const successes = document.querySelectorAll('.success').length;
            const errors = document.querySelectorAll('.error').length;
            const summary = document.createElement('div');
            summary.style.marginTop = '20px';
            summary.style.padding = '15px';
            summary.style.border = errors === 0 ? '2px solid #0f0' : '2px solid #f00';
            summary.style.borderRadius = '5px';
            summary.innerHTML = `
                <h2>Summary</h2>
                <p>‚úì Passed: ${successes}</p>
                <p>‚úó Failed: ${errors}</p>
                <p>${errors === 0 ? 'üéâ All imports working! The application should load correctly.' : '‚ö†Ô∏è Some imports failed.'}</p>
            `;
            results.appendChild(summary);
        }, 1000);
    </script>
</body>
</html>